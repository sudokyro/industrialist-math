<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industrialist Game Math Compendium</title>
    
    <!-- 1. Configure MathJax to recognize single '$' for inline math -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <!-- 2. Load MathJax -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        :root {
            --bg-dark: #121212;
            --bg-card: #1e1e1e;
            --accent: #ffa500; /* Industrial Orange */
            --text-main: #e0e0e0;
            --text-dim: #a0a0a0;
            --border: #333;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 260px;
            background-color: #0a0a0a;
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            padding: 20px;
            flex-shrink: 0;
        }

        .brand {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent);
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
        }

        .nav-btn {
            background: none;
            border: none;
            color: var(--text-dim);
            text-align: left;
            padding: 15px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
            margin-bottom: 5px;
            border-radius: 0 4px 4px 0;
        }

        .nav-btn:hover {
            color: var(--text-main);
            background-color: rgba(255, 255, 255, 0.05);
        }

        .nav-btn.active {
            color: var(--accent);
            background-color: rgba(255, 165, 0, 0.1);
            border-left: 3px solid var(--accent);
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            position: relative;
        }

        .section-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--accent);
            border-bottom: 1px solid var(--border);
            padding-bottom: 10px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            padding-bottom: 40px;
        }

        /* Cards */
        .card {
            background-color: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: transform 0.2s;
        }
        
        .card:hover {
            border-color: #444;
        }

        .card h3 {
            margin-bottom: 15px;
            color: #fff;
            font-size: 1.3rem;
            border-left: 4px solid var(--accent);
            padding-left: 12px;
        }

        .formula-box {
            background-color: #000;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            text-align: center;
            border: 1px solid #333;
            overflow-x: auto;
        }

        .text-content {
            line-height: 1.7;
            font-size: 0.95rem;
            color: var(--text-dim);
        }

        /* Tables within cards */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 0.9rem;
        }

        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #333;
        }

        th {
            color: var(--accent);
            font-weight: 600;
        }

        tr:last-child td {
            border-bottom: none;
        }

        /* Tags */
        .tag {
            display: inline-block;
            padding: 4px 8px;
            font-size: 0.75rem;
            border-radius: 4px;
            margin-bottom: 15px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .tag.known { background-color: rgba(46, 204, 113, 0.15); color: #2ecc71; border: 1px solid rgba(46, 204, 113, 0.3); }
        .tag.partial { background-color: rgba(241, 196, 15, 0.15); color: #f1c40f; border: 1px solid rgba(241, 196, 15, 0.3); }
        .tag.unknown { background-color: rgba(231, 76, 60, 0.15); color: #e74c3c; border: 1px solid rgba(231, 76, 60, 0.3); }

        /* Tab Content Visibility */
        .section-content {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        .section-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Mobile Responsive */
        @media(max-width: 768px) {
            body { flex-direction: column; overflow-y: auto; height: auto; }
            .sidebar { width: 100%; height: auto; padding: 10px; }
            .main-content { overflow-y: visible; padding: 20px; }
            .nav-btn { padding: 10px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>

    <nav class="sidebar">
        <div class="brand">Industrialist</div>
        <!-- Added IDs to buttons for easier JS targeting if needed, but onclick passes 'this' -->
        <button class="nav-btn active" onclick="switchTab(this, 'research')">Research Systems</button>
        <button class="nav-btn" onclick="switchTab(this, 'power')">Power & Fluids</button>
        <button class="nav-btn" onclick="switchTab(this, 'pollution')">Pollution & Ecology</button>
        <button class="nav-btn" onclick="switchTab(this, 'economy')">Economy & Logistics</button>
        <button class="nav-btn" onclick="switchTab(this, 'unknowns')">Unknowns & Misc</button>
    </nav>

    <div class="main-content">
        
        <!-- RESEARCH SECTION -->
        <div id="research" class="section-content active">
            <h1 class="section-title">Research Stations (RS)</h1>
            <div class="grid">
                
                <!-- RS1 Card -->
                <div class="card">
                    <h3>Research Station 1 (RS1)</h3>
                    <span class="tag known">Fully Known</span>
                    <div class="text-content">
                        Base rate is 30 RP every 36.67s.
                        <div class="formula-box">
                            $$ Output = N_{RS1} \cdot 0.818 \cdot M(R) $$
                        </div>
                        <strong>Multiplier M(R) Table:</strong>
                        <table>
                            <tr><th>RP Stored (R)</th><th>Multiplier</th></tr>
                            <tr><td>0 - 499</td><td>1.0</td></tr>
                            <tr><td>500 - 1,199</td><td>0.9</td></tr>
                            <tr><td>1,200 - 1,799</td><td>0.8</td></tr>
                            <tr><td>1,800 - 2,199</td><td>0.7</td></tr>
                            <tr><td>2,200 - 2,999</td><td>0.6</td></tr>
                            <tr><td>3,000 - 4,999</td><td>0.5</td></tr>
                            <tr><td>5,000 - 6,999</td><td>0.4</td></tr>
                            <tr><td>7,000 - 11,999</td><td>0.2</td></tr>
                            <tr><td>12,000+</td><td>0.1</td></tr>
                        </table>
                    </div>
                </div>

                <!-- RS2 Card -->
                <div class="card">
                    <h3>Research Station 2 (RS2)</h3>
                    <span class="tag partial">Formulas Vary</span>
                    <div class="text-content">
                        Consumes solid items at 0.5 items/s. Let $n$ be the sum of research efficiency per item.
                        <div class="formula-box">
                            $$ RP/s = 2 \cdot n^{0.6} $$
                        </div>
                        <strong>Cap Formulas (Disputed):</strong><br>
                        Logarithmic: $Cap = 2000 \cdot \log_2(m+1)$<br>
                        Geometric: $Cap \approx 2000 \cdot 1.585^{(m-1)}$
                        <br><br>
                        <strong>Slowdown M2(R):</strong><br>
                        Starts at 3.0 ($R<2000$), drops to 0.2 ($R \ge 30000$).
                    </div>
                </div>

                <!-- RS3 & RS4 Card -->
                <div class="card">
                    <h3>RS3 & RS4 Mechanics</h3>
                    <span class="tag partial">Partially Known</span>
                    <div class="text-content">
                        <strong>RS3:</strong> Dual-input (0.1 items/s per input). RP/s is proportional to item efficiency. Cap depends on input money value.<br><br>
                        <strong>RS4:</strong> No direct RP output.
                        <ul>
                            <li>Attaches to RS3.</li>
                            <li><strong>Power Draw:</strong> 5 MMF/s.</li>
                            <li><strong>Cap Boost:</strong> $\approx +100,000$ per RS4.</li>
                            <li><strong>Minigame:</strong> 4-bit adder loop. Max output $1111_2$ (15). Internal sum can reach 30.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- POWER SECTION -->
        <div id="power" class="section-content">
            <h1 class="section-title">Power, Steam & Fluids</h1>
            <div class="grid">
                
                <!-- Turbines -->
                <div class="card">
                    <h3>Turbines</h3>
                    <span class="tag partial">Mixed Knowledge</span>
                    <div class="text-content">
                        <strong>Small Steam Turbine:</strong>
                        <div class="formula-box">
                            $$ Input: 0.3 L/s \text{ Steam} $$
                            $$ Output: 1.95 \text{ kMF/s} $$
                        </div>
                        Notes: Constant output. Wastes steam $> 0.3 L/s$.<br><br>
                        <strong>Large Turbine:</strong> Output $P(T)$ increases with steam temp. (Approx 350-410k MF/s @ 240Â°C).<br><br>
                        <strong>Modular Turbine:</strong> Sync req: 3590-3610 RPM. Failure if $\Delta RPM > 5$.
                    </div>
                </div>

                <!-- Steam Mechanics -->
                <div class="card">
                    <h3>Steam & Boilers</h3>
                    <span class="tag known">Constants Known</span>
                    <div class="text-content">
                        <strong>Expansion Ratio:</strong> 1 Water : 30 Steam.<br>
                        <strong>Thermal Loss:</strong> $-0.01^{\circ}C$ per pipe connection.<br>
                        <strong>Liquid Boilers:</strong> Max Temp $105^{\circ}C$.
                        <ul>
                            <li>Req: 6.25 Oil Rigs for saturation.</li>
                            <li>Req: 3.125 American Rigs for saturation.</li>
                        </ul>
                    </div>
                </div>

                <!-- Fluid Dynamics -->
                <div class="card">
                    <h3>Fluid Dynamics</h3>
                    <span class="tag unknown">Internal Math Unknown</span>
                    <div class="text-content">
                        Exact L/s values per pipe tier are not published.
                        <div class="formula-box">
                            $$ Flow = C_{tier} \cdot f(Pressure, Temp) $$
                        </div>
                        Note: <i>Cooling, Condensers, and Flash Boilers operate on unknown internal rules.</i>
                    </div>
                </div>

            </div>
        </div>

        <!-- POLLUTION SECTION -->
        <div id="pollution" class="section-content">
            <h1 class="section-title">Pollution & Ecology</h1>
            <div class="grid">
                
                <!-- Scrubber Rates -->
                <div class="card">
                    <h3>Scrubbing Math</h3>
                    <span class="tag known">Fully Known</span>
                    <table>
                        <tr><th>Method</th><th>Rate (/hour)</th></tr>
                        <tr><td>Basic Scrubber</td><td>-3.24%</td></tr>
                        <tr><td>Filtered Scrubber</td><td>-6.48%</td></tr>
                        <tr><td>Tree Scrubber (0% Pol)</td><td>-3.88%</td></tr>
                        <tr><td>Residue Recipes</td><td>+6.48%</td></tr>
                    </table>
                    <br>
                    <small>Tree efficiency follows unknown function $f(P)$ at negative pollution.</small>
                </div>

                <!-- Generation -->
                <div class="card">
                    <h3>Generation & Total Rate</h3>
                    <span class="tag known">Aggregate Formula</span>
                    <div class="text-content">
                        <strong>Machine Rates (Per Sale):</strong><br>
                        Truck Depot: 0.0005%<br>
                        Huge Depot: 0.006%<br>
                        Large Liq. Depot: 0.01%<br>
                        <div class="formula-box" style="font-size: 0.8em;">
                            $$ \frac{dP}{dt} = \sum P_{mach} + 6.48 N_{res} - 3.24 N_{scrub} - 6.48 N_{filt} - 3.88 f(P) N_{tree} $$
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- ECONOMY SECTION -->
        <div id="economy" class="section-content">
            <h1 class="section-title">Economy & Logistics</h1>
            <div class="grid">
                
                <!-- Money Math -->
                <div class="card">
                    <h3>Money Modifiers</h3>
                    <span class="tag partial">Partially Known</span>
                    <div class="text-content">
                        Prices fluctuate based on pollution level $P$.
                        <div class="formula-box">
                            $$ Price(P) = BasePrice \cdot f(P) $$
                        </div>
                        <strong>Sample Point:</strong> At 100% Pollution, Coal drops from $5.2 to $4.3.
                        $$ f(100\%) \approx 0.827 $$
                    </div>
                </div>

                <!-- Depots -->
                <div class="card">
                    <h3>Depot Throughput</h3>
                    <span class="tag known">Fully Known</span>
                    <table>
                        <tr><th>Depot Type</th><th>Batch</th><th>Rate (calc)</th></tr>
                        <tr><td>Truck Depot</td><td>10 items / 15s</td><td>0.667 items/s</td></tr>
                        <tr><td>Huge Depot</td><td>400 items / 80s</td><td>5 items/s</td></tr>
                        <tr><td>Liquid Depot</td><td>4000 L / 80s</td><td>50 L/s</td></tr>
                    </table>
                    <div class="formula-box">
                        $$ Earning = Throughput \cdot Price(P) $$
                    </div>
                </div>

                <!-- Crafting -->
                <div class="card">
                    <h3>Production Logic</h3>
                    <span class="tag known">Standard Logic</span>
                    <div class="text-content">
                        <strong>Items Per Second (IPS):</strong>
                        $$ IPS = N_{mach} \cdot \frac{Output}{Time} $$
                        <strong>Bottleneck:</strong>
                        $$ Throughput = \min(IPS_{stage1}, IPS_{stage2}, ...) $$
                        <strong>Balancing Vectors:</strong>
                        $$ R_{total} = \sum n_i \cdot [Inputs/s, Outputs/s] $$
                    </div>
                </div>

                <!-- Mining -->
                <div class="card">
                    <h3>Mining & Belts</h3>
                    <span class="tag partial">Generic Logic</span>
                    <div class="text-content">
                        <strong>Ore Extraction:</strong>
                        $$ \frac{Ore}{s} = \frac{Yield}{Cycle} \cdot Drills \cdot (1+Bonus) $$
                        <strong>Belt/Transport:</strong>
                        $$ \frac{Items}{s} = Speed \cdot Density $$
                        <small>Specific belt speed values are not numerically documented.</small>
                    </div>
                </div>

            </div>
        </div>

           <!-- UNKNOWNS SECTION -->
           <div id="unknowns" class="section-content">
            <h1 class="section-title">Black Box / Unknowns</h1>
            <div class="grid">
                <div class="card" style="grid-column: span 2;">
                    <h3>The "Unknown" List</h3>
                    <span class="tag unknown">Hidden Mechanics</span>
                    <div class="text-content">
                        While the wiki documents the formulas in the other tabs, the following systems operate on internally coded behaviors that are not publicly available:
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li><strong>Terrain Generation:</strong> Noise functions and seed logic.</li>
                            <li><strong>Precise Thermal Exchange:</strong> Boiler internal temp-transfer formulas.</li>
                            <li><strong>Detailed Curves:</strong> Large Steam Turbine exact $P(T)$ function.</li>
                            <li><strong>Core Logic:</strong> Pathfinding cost functions, UI smoothing, Per-tick integer rounding.</li>
                            <li><strong>Depot Batching:</strong> Exact logic for batch grouping.</li>
                            <li><strong>RS4 Physics:</strong> The exact formula for how minigames boost Cap.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        function switchTab(btn, sectionId) {
            // 1. Remove active class from all buttons
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(b => b.classList.remove('active'));

            // 2. Add active class to clicked button
            btn.classList.add('active');

            // 3. Hide all sections
            const sections = document.querySelectorAll('.section-content');
            sections.forEach(sec => sec.classList.remove('active'));

            // 4. Show the target section
            const target = document.getElementById(sectionId);
            if (target) {
                target.classList.add('active');
            }
        }
    </script>
</body>
</html>
